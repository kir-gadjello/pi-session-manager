# 左侧边栏测试指南

## 快速启动

```bash
cd ~/Dev/AI/pi-session-manager
npm run tauri:dev
```

## 测试清单

### 1. 基础显示测试 ✅

#### 1.1 打开侧边栏
- [ ] 点击 SessionViewer 左上角的菜单按钮 (☰)
- [ ] 侧边栏应该从左侧滑出
- [ ] 宽度应该是 400px

#### 1.2 树形结构
- [ ] 应该看到树形连接线 (`├─`, `└─`, `│`)
- [ ] 每层缩进应该是 3 个字符
- [ ] 活动节点应该有 `•` 标记
- [ ] 非活跃节点应该有 `·` 标记

#### 1.3 颜色方案
- [ ] 用户消息: 青色 (#8abeb7)
- [ ] 助手消息: 绿色 (#b5bd68)
- [ ] 工具结果: 灰色 (#808080)
- [ ] 连接线: 灰色 (#808080)

### 2. 交互测试 ✅

#### 2.1 节点点击
- [ ] 点击任意节点
- [ ] 主内容区应该滚动到对应消息
- [ ] 节点应该变为活动状态（粗体 + 背景色）

#### 2.2 悬停效果
- [ ] 鼠标悬停在节点上
- [ ] 背景色应该变为 #3a3a4a
- [ ] 应该有平滑的过渡动画 (0.15s)

#### 2.3 活动路径
- [ ] 点击深层嵌套的节点
- [ ] 从根到该节点的路径应该都显示 `•` 标记
- [ ] 其他节点应该显示 `·` 标记

### 3. 搜索测试 ✅

#### 3.1 基础搜索
- [ ] 在搜索框输入关键词
- [ ] 应该只显示匹配的节点
- [ ] 状态栏应该显示过滤后的数量

#### 3.2 多关键词搜索
- [ ] 输入多个关键词（空格分隔）
- [ ] 应该只显示同时包含所有关键词的节点

#### 3.3 清空搜索
- [ ] 清空搜索框
- [ ] 应该显示所有节点

### 4. 过滤测试 ✅

#### 4.1 Default 模式
- [ ] 点击 "Default" 按钮
- [ ] 应该隐藏空文本的助手消息
- [ ] 按钮应该高亮显示

#### 4.2 No-tools 模式
- [ ] 点击 "No Tools" 按钮
- [ ] 应该隐藏工具结果
- [ ] 应该隐藏空文本的助手消息

#### 4.3 User 模式
- [ ] 点击 "User" 按钮
- [ ] 应该只显示用户消息

#### 4.4 Labeled 模式
- [ ] 点击 "Labeled" 按钮
- [ ] 应该只显示有标记的消息

#### 4.5 All 模式
- [ ] 点击 "All" 按钮
- [ ] 应该显示所有节点

### 5. 状态栏测试 ✅

#### 5.1 显示数量
- [ ] 状态栏应该显示 "X / Y nodes"
- [ ] X 是过滤后的数量
- [ ] Y 是总数量

#### 5.2 动态更新
- [ ] 切换过滤模式
- [ ] 状态栏数量应该实时更新
- [ ] 搜索时数量应该实时更新

### 6. 边界情况测试 ⚠️

#### 6.1 空会话
- [ ] 打开一个空会话
- [ ] 应该显示 "No messages"

#### 6.2 单根节点
- [ ] 打开只有一个根节点的会话
- [ ] 树形结构应该正确显示

#### 6.3 多根节点
- [ ] 打开有多个根节点的会话
- [ ] 应该正确处理虚拟根节点

#### 6.4 深层嵌套
- [ ] 打开有深层嵌套的会话（5+ 层）
- [ ] 连接线应该正确显示
- [ ] 垂直线应该正确对齐

### 7. 性能测试 ⚠️

#### 7.1 大量节点
- [ ] 打开有 100+ 消息的会话
- [ ] 侧边栏应该流畅渲染
- [ ] 滚动应该流畅

#### 7.2 搜索性能
- [ ] 在大量节点中搜索
- [ ] 应该在 100ms 内返回结果

#### 7.3 过滤性能
- [ ] 切换过滤模式
- [ ] 应该立即响应

### 8. 样式测试 ✅

#### 8.1 字体
- [ ] 字体应该是 monospace
- [ ] 字体大小应该是 11px
- [ ] 行高应该是 13px

#### 8.2 间距
- [ ] 节点之间应该没有额外间距
- [ ] 搜索框和过滤器之间应该有适当间距

#### 8.3 对齐
- [ ] 连接线应该正确对齐
- [ ] 文本应该与连接线对齐

### 9. 国际化测试 ✅

#### 9.1 英文
- [ ] 切换到英文
- [ ] 所有文本应该显示英文

#### 9.2 中文
- [ ] 切换到中文
- [ ] 所有文本应该显示中文

### 10. 响应式测试 ⚠️

#### 10.1 窗口大小
- [ ] 调整窗口大小
- [ ] 侧边栏应该保持 400px 宽度
- [ ] 主内容区应该自适应

#### 10.2 小屏幕
- [ ] 在小屏幕上测试（< 1024px）
- [ ] 侧边栏应该可以关闭

## 已知问题

### 待修复
- [ ] 响应式设计需要补充
- [ ] 键盘导航待实现
- [ ] 节点折叠/展开待实现

### 待优化
- [ ] 虚拟滚动（大量节点时）
- [ ] Markdown 缓存
- [ ] 代码高亮懒加载

## 测试环境

- **操作系统**: macOS / Windows / Linux
- **浏览器**: Chrome 90+ / Firefox 88+ / Safari 14+ / Edge 90+
- **Node.js**: 18+
- **Rust**: 1.70+

## 报告问题

如果发现问题，请记录：
1. 问题描述
2. 复现步骤
3. 预期行为
4. 实际行为
5. 截图（如果适用）
6. 环境信息

## 测试数据

### 测试会话位置
```
~/.pi/agent/sessions/
```

### 创建测试数据
```bash
# 使用 Pi Agent 创建测试会话
pi
# 进行多轮对话
# 使用工具调用
# 创建嵌套对话
```

---

**测试版本**: v0.1.0
**测试日期**: 2026-01-31
**测试人员**: _______
